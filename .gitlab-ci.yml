cache:
  paths:
    - .m2/repository

stages:
  - clean
  - test
  - install

clean:
  stage: clean
  script:
    - export JAVA_HOME=$JAVA_HOME
    - echo $JAVA_HOME
    - mvn clean
  only:
    - master

test:
  stage: test
  script:
    - export JAVA_HOME=$JAVA_HOME
    - echo $JAVA_HOME
    - mvn test
  only:
    - master

install:
  stage: install
  script:
    - export JAVA_HOME=$JAVA_HOME
    - echo $JAVA_HOME
    - mvn install -DskipTests
  only:
    - master
